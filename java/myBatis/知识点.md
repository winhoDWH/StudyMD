## 配置文件

### 一、environment环境配置

```
<environments default="d1">
    <environment id="d1">
        <transactionManager type="JDBC"/>
        <dataSource type="POOLED">
            <property name="driver" value="com.mysql.jdbc.Driver"/>
            <property name="url" value="jdbc:mysql://192.168.126.3/myDataBase"/>
            <property name="username" value="root"/>
            <property name="password" value="123456"/>
        </dataSource>
    </environment>
    <environment id="d2">
        <transactionManager type="JDBC"/>
        <dataSource type="POOLED">
            <property name="driver" value="{}"/>
            <property name="url" value="{}"/>
            <property name="username" value="{}"/>
            <property name="password" value="{}"/>
        </dataSource>
    </environment>
</environments>
```

使用`<environments>标签`可以配置多套数据库连接配置，通过`default`属性决定使用哪一个数据库连接；

### 二、`mybatis-config.xml`文件和`mapper.xml`文件的文件抬头很相似

![image-20211006091935764](img/image-20211006091935764.png)

<center>mybatis-config.xml文件的配置</center>

![image-20211006092218730](img/image-20211006092218730.png)

<center>mapper.xml文件的配置</center>

### 三、`select`标签

1. 标签属性：

* `resultType`指定方法返回类型；
* `parameterType`指定方法输入参数；基本数据类型不需要声明该标签属性

2. 输入参数写法（与JDBC中sql中的?一样）：`#{}`

### 四、 增、删、改三种操作

都需要提交事务：

``` java
sqlSession.commit();
```

### 五、模糊查询

1. 在java代码设置参数的时候，加上通配符`%`；
2. 在sql中使用`CONCAT(STR1, STR2,....)`拼接字符串；

### 六、解决属性名与字段名不一致问题

1. 使用sql中的`as`关键字创建别名处理；

2. 使用`resultMap`进行结果集映射

   ```xml
   <resultMap id="user1" type="user">
       <!--column数据库中的字段名 property实体类中的名称 -->
       <result column="ID" property="id"/>
   </resultMap>
   ```

### 七、分页

1. 使用limit；
2. 使用rowBounds分页类（不推荐）
3. 使用pageHelper(推荐)

###  八、注解

1. 如：`@Select("")`里面可写sql，这样就不需要写xml文件了；
2. 注解都是通过反射加载，反射解析注解中的sql语句；

3. `@Param("")`写在mapper接口的方法参数上，用于区分多个参数的情况下；基本数据类型和string类型需要加上，引用类型不需要；
4. `${}`与`#{}`的区别：
   * `${}`直接把参数当SQL字符串拼到SQL进去，会有SQL注入的风险；
   * `#{}`是当一个参数传入，会校验对应的映射类型，防止SQL注入；

