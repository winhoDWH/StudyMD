## `AOP`概念

1. 横切关注点：就是我们需要加入增强的那部分功能，如日志、事务等；
2. 切面（ASPECT）：就是增强功能实现的类；
3. 通知（Advice）：切面需要完成的工作，指的是切面中的方法。
4. 目标（Target）：需要加入切面功能的对象；
5. 代理（Proxy）：加入切面增强后的对象；
6. 切入点（PointCut）：切面通知的地点，即切面需要加入到什么方法中；
7. 连接点（JointPoint）：与切入点匹配的执行点。



## `@Pointcut`语法详解

1. 用于匹配切面

2. 定义`@Pointcut(value = "表达式标签(表达式)")`

### `@Pointcut`中的表达式标签

####  一、`execution`表达式

- 格式：`execution(修饰符匹配? 返回值匹配 类路径匹配? 方法名匹配(参数名匹配) 异常匹配？)`
- 上述格式中，带`?`的都是可选项
- 参数名和类名匹配中可以使用`AspectJ类型匹配的语法`：
  - `*`匹配任意字符，例如：(*, String)，有两个参数，第一个参数为任意类型
  - `..`匹配任意数量的字符重复，例如：(..)代表所有参数
  - `+`匹配指定类型的子类型（即子类，如`Number+`，则匹配`Integer`这些子类）


#### 二、`within()`表达式

1. within(`X类的完整类路径`)，该表达式只匹配X类实例。
2. 该表达式也可以使用`AspectJ类型匹配的语法`，如：within(`com..*`)，表示匹配com包下任意类型的类的任意方法。

#### 三、`this()`表达式

1. this(``X类``)，该表达式会匹配`X类以及继承/实现X类`的实例，但只代理`X类`中显示声明的方法以及该实例类中其他显式声明的方法，**不会代理`X父类`中没被重写的方法**。
2. 该表达式中类必须要写完整类路径；

#### 四、`target()`表达式

1. target(`X类`)，该表达式会匹配`X类以及继承/实现X类`的实例，并且代理其一切方法

2. 该表达式中类必须要写完整类路径；

#### 五、within、this、target三个表达式中同时为某X类时区别

- within：匹配时相当于被代理类对象`equals X类`，需要完全相等；
- this：匹配时，相当于先判断被代理类对象是否`instanceof X类`，然后判断执行的方法是否在X类或者其子类声明的，X类的父类方法如果没有被重写是不会被代理的。
- target：匹配时，相当于只要被代理类对象``instanceof X类`，则其执行的所有方法都会被代理。
